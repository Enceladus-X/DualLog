(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7854:function(e,t,a){Promise.resolve().then(a.bind(a,653))},653:function(e,t,a){"use strict";a.d(t,{default:function(){return ex}});var s=a(7437),r=a(2265),n=a(1538),l=a(3027),o=a(4839),c=a(6164);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.m6)((0,o.W)(t))}let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:o=!1,...c}=e,m=o?n.g7:"button";return(0,s.jsx)(m,{className:i(d({variant:r,size:l,className:a})),ref:t,...c})});m.displayName="Button";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});h.displayName="Card";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("flex flex-col space-y-1.5 p-6",a),...r})});x.displayName="CardHeader";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("text-2xl font-semibold leading-none tracking-tight",a),...r})});g.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("p-6 pt-0",a),...r})});u.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:i("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";let p=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});p.displayName="Input";var y=a(8837);let b=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(y.f,{ref:t,className:i(b(),a),...r})});f.displayName=y.f.displayName;var w=a(7816);let k=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(w.fC,{className:i("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(w.bU,{className:i("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});k.displayName=w.fC.displayName;var N=a(9061),j=a(4436);function v(e){let{settings:t,onSave:a,onBack:n,t:l}=e,[o,c]=(0,r.useState)(t);return(0,s.jsx)("div",{className:"w-96 h-[600px] overflow-y-auto ".concat("dark"===t.theme?"bg-gray-900":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(m,{variant:"ghost",size:"sm",onClick:n,className:"dark"===t.theme?"text-white hover:bg-gray-800":"hover:bg-gray-100",children:["← ",l.back]}),(0,s.jsx)("h1",{className:"text-lg font-bold ".concat("dark"===t.theme?"text-white":"text-gray-800"),children:l.settings}),(0,s.jsxs)(m,{onClick:()=>{a(o),n()},size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white",children:[(0,s.jsx)(N.Z,{className:"h-3 w-3 mr-1"}),l.save]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===t.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===t.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(j.Z,{className:"h-4 w-4 mr-2 text-blue-500"}),l.language]})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m,{onClick:()=>c({...o,language:"ko"}),variant:"ko"===o.language?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("ko"===o.language?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"dark"===t.theme?"bg-gray-700 hover:bg-gray-600 text-white border-gray-600":"bg-white hover:bg-blue-50 text-gray-700 border-gray-300"),children:l.korean}),(0,s.jsx)(m,{onClick:()=>c({...o,language:"en"}),variant:"en"===o.language?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("en"===o.language?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"dark"===t.theme?"bg-gray-700 hover:bg-gray-600 text-white border-gray-600":"bg-white hover:bg-blue-50 text-gray-700 border-gray-300"),children:l.english})]})})]}),(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===t.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsx)(g,{className:"text-sm font-semibold ".concat("dark"===t.theme?"text-white":"text-gray-800"),children:"커뮤니티 연동"})}),(0,s.jsxs)(u,{className:"pt-0 space-y-2",children:[(0,s.jsx)(f,{htmlFor:"community-url",className:"dark"===t.theme?"text-gray-300":"text-gray-700",children:"글쓰기 페이지 URL (디시인사이드 마이너 갤러리)"}),(0,s.jsx)(p,{id:"community-url",placeholder:"예: https://gall.dcinside.com/mgallery/board/write/?id=tcg",value:o.communityUrl||"",onChange:e=>c({...o,communityUrl:e.target.value}),className:"dark"===t.theme?"bg-gray-700 border-gray-600 text-white":""})]})]}),(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===t.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsx)(g,{className:"text-sm font-semibold ".concat("dark"===t.theme?"text-white":"text-gray-800"),children:"개발자 모드"})}),(0,s.jsxs)(u,{className:"pt-0 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(f,{htmlFor:"dev-mode",className:"dark"===t.theme?"text-gray-300":"text-gray-700",children:"개발자 모드 활성화"}),(0,s.jsx)(k,{id:"dev-mode",checked:!!o.developerMode,onCheckedChange:e=>c({...o,developerMode:e})})]}),(0,s.jsx)("p",{className:"dark"===t.theme?"text-gray-400 text-xs":"text-gray-600 text-xs",children:"테스트용 데이터 주입, 디버그 로그 등 개발 편의 기능을 켭니다."})]})]})]})]})})}var D=a(7720);let S=D.fC,R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.aV,{ref:t,className:i("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});R.displayName=D.aV.displayName;let C=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.xz,{ref:t,className:i("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});C.displayName=D.xz.displayName;let A=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.VY,{ref:t,className:i("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});A.displayName=D.VY.displayName;var O=a(9395),F=a(2421),M=a(4392),T=a(2468);let _=O.fC;O.ZA;let E=O.B4,W=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(O.xz,{ref:t,className:i("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(O.JO,{asChild:!0,children:(0,s.jsx)(F.Z,{className:"h-4 w-4 opacity-50"})})]})});W.displayName=O.xz.displayName;let I=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.u_,{ref:t,className:i("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(M.Z,{className:"h-4 w-4"})})});I.displayName=O.u_.displayName;let G=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.$G,{ref:t,className:i("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(F.Z,{className:"h-4 w-4"})})});G.displayName=O.$G.displayName;let Z=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,s.jsx)(O.h_,{children:(0,s.jsxs)(O.VY,{ref:t,className:i("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,s.jsx)(I,{}),(0,s.jsx)(O.l_,{className:i("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(G,{})]})})});Z.displayName=O.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.__,{ref:t,className:i("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=O.__.displayName;let V=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(O.ck,{ref:t,className:i("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(O.wU,{children:(0,s.jsx)(T.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(O.eT,{children:r})]})});V.displayName=O.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.Z0,{ref:t,className:i("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=O.Z0.displayName;var B=a(7164),L=a(8184),P=a(5430),z=a(3225),H=a(1902),U=a(933),q=a(2022),Y=a(1240),J=a(6900);function Q(e){let{allTimeStats:t,todayMatches:a,allMatches:n,onBack:l,onExportCSV:o,onImportCSV:c,bestDeck:i,t:d,settings:p}=e,[y,b]=(0,r.useState)("overview"),[f,w]=(0,r.useState)("all"),[k,N]=(0,r.useState)("all"),[j,v]=(0,r.useState)("all"),[D,O]=(0,r.useState)("date"),[F,M]=(0,r.useState)("winRate");console.log("StatsView - 전체 매치 수:",n.length),console.log("StatsView - 오늘 매치 수:",a.length),console.log("StatsView - 첫 번째 매치:",n[0]),t.length;let T=n.length,I=n.filter(e=>"win"===e.result).length,G=n.filter(e=>"lose"===e.result).length,Q=T>0?I/T*100:0;console.log("StatsView - 총 게임:",T,"승:",I,"패:",G,"승률:",Q);let K=function(e){let t=0,a=0,s=[];return e.forEach(e=>{"win"===e.result?(a++,t=Math.max(t,a)):(a>0&&s.push(a),a=0)}),a>0&&s.push(a),{maxStreak:t,currentStreak:a,streakHistory:s}}(n),X=function(e){let t=new Map;return e.forEach(e=>{let a=e.yourDeck;t.has(a)||t.set(a,{wins:0,losses:0,streaks:[]});let s=t.get(a);"win"===e.result?(s.wins++,e.winStreak>0&&s.streaks.push(e.winStreak)):s.losses++}),Array.from(t.entries()).map(e=>{let[t,a]=e;return{deck:t,wins:a.wins,losses:a.losses,total:a.wins+a.losses,winRate:a.wins+a.losses>0?a.wins/(a.wins+a.losses)*100:0,avgWinStreak:a.streaks.length>0?a.streaks.reduce((e,t)=>e+t,0)/a.streaks.length:0}}).sort((e,t)=>t.winRate-e.winRate)}(n),$=function(e){let t=new Map;return e.forEach(e=>{let a="".concat(e.yourDeck," vs ").concat(e.opponentDeck);t.has(a)||t.set(a,{wins:0,losses:0});let s=t.get(a);"win"===e.result?s.wins++:s.losses++}),Array.from(t.entries()).map(e=>{let[t,a]=e,[s,r]=t.split(" vs ");return{yourDeck:s,opponentDeck:r,wins:a.wins,losses:a.losses,total:a.wins+a.losses,winRate:a.wins+a.losses>0?a.wins/(a.wins+a.losses)*100:0}}).filter(e=>e.total>=3).sort((e,t)=>t.winRate-e.winRate)}(n),ee=function(e){let t={wins:0,losses:0},a={wins:0,losses:0};return e.forEach(e=>{"first"===e.position?"win"===e.result?t.wins++:t.losses++:"win"===e.result?a.wins++:a.losses++}),{first:{...t,total:t.wins+t.losses,winRate:t.wins+t.losses>0?t.wins/(t.wins+t.losses)*100:0},second:{...a,total:a.wins+a.losses,winRate:a.wins+a.losses>0?a.wins/(a.wins+a.losses)*100:0}}}(n),et=function(e){let t={morning:{wins:0,losses:0},afternoon:{wins:0,losses:0},evening:{wins:0,losses:0},night:{wins:0,losses:0}};return e.forEach(e=>{let a;let s=new Date(e.timestamp).getHours();a=s>=6&&s<12?"morning":s>=12&&s<18?"afternoon":s>=18&&s<24?"evening":"night","win"===e.result?t[a].wins++:t[a].losses++}),Object.entries(t).map(e=>{let[t,a]=e;return{time:t,...a,total:a.wins+a.losses,winRate:a.wins+a.losses>0?a.wins/(a.wins+a.losses)*100:0}}).filter(e=>e.total>0)}(n);(()=>{let e=[0,0,0,0];n.forEach(t=>{let a=new Date(t.timestamp).getMonth();e[Math.floor(a/3)]++})})();let ea=function(e){let t=new Map;e.forEach(e=>{let a=e.yourDeck;t.set(a,(t.get(a)||0)+1)});let a=Array.from(t.entries()).sort((e,t)=>t[1]-e[1]);return a.length>0?{deck:a[0][0],count:a[0][1]}:void 0}(n),es=n.filter(e=>("all"===f||e.yourDeck===f)&&("all"===k||e.opponentDeck===k)&&("all"===j||e.result===j)).sort((e,t)=>{switch(D){case"date":return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();case"yourDeck":return e.yourDeck.localeCompare(t.yourDeck);case"opponentDeck":return e.opponentDeck.localeCompare(t.opponentDeck);case"result":return e.result.localeCompare(t.result);default:return 0}}),er=Array.from(new Set(n.map(e=>e.yourDeck))),en=Array.from(new Set(n.map(e=>e.opponentDeck))),el=$.sort((e,t)=>{switch(F){case"winRate":default:return t.winRate-e.winRate;case"yourDeck":return e.yourDeck.localeCompare(t.yourDeck)}}),eo=n.filter(e=>e.winStreak===K.maxStreak).map(e=>e.yourDeck)[0]||"알 수 없음";return(0,s.jsx)("div",{className:"w-96 h-[600px] overflow-y-auto ".concat("dark"===p.theme?"bg-gray-900":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(m,{variant:"ghost",size:"sm",onClick:l,className:"dark"===p.theme?"text-white hover:bg-gray-800":"hover:bg-gray-100",children:["← ",d.back]}),(0,s.jsx)("h1",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:d.statsAnalysis}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(m,{onClick:o,variant:"outline",size:"sm",title:d.csvExport,className:"p-2 ".concat("dark"===p.theme?"bg-gray-800 border-gray-700 text-white":"bg-transparent"),children:(0,s.jsx)(B.Z,{className:"h-3 w-3"})}),(0,s.jsx)(m,{onClick:c,variant:"outline",size:"sm",title:d.csvImport,className:"p-2 ".concat("dark"===p.theme?"bg-gray-800 border-gray-700 text-white":"bg-transparent"),children:(0,s.jsx)(L.Z,{className:"h-3 w-3"})})]})]}),(0,s.jsxs)(S,{value:y,onValueChange:b,className:"w-full",children:[(0,s.jsxs)(R,{className:"grid w-full grid-cols-4 mb-4 ".concat("dark"===p.theme?"bg-gray-800":""),children:[(0,s.jsx)(C,{value:"overview",className:"text-xs",children:d.overview}),(0,s.jsx)(C,{value:"detailed",className:"text-xs",children:d.detailed}),(0,s.jsx)(C,{value:"matchup",className:"text-xs",children:d.matchup}),(0,s.jsx)(C,{value:"history",className:"text-xs",children:d.history})]}),(0,s.jsx)(A,{value:"overview",className:"space-y-4",children:0===T?(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsxs)(u,{className:"p-6 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-medium mb-2 ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:"데이터를 불러오는 중..."}),(0,s.jsx)("div",{className:"text-sm ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:"CSV 파일에서 전적 데이터를 로드하고 있습니다."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{className:"bg-gradient-to-br from-blue-400 to-blue-500 border-blue-400 shadow-lg",children:(0,s.jsxs)(u,{className:"p-6 text-center text-white",children:[(0,s.jsxs)("div",{className:"text-4xl font-bold mb-2",children:[Q.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-blue-100 text-sm",children:d.totalWinRate}),(0,s.jsxs)("div",{className:"text-blue-200 text-xs mt-1",children:[T,d.games," 중 ",I,d.wins]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"bg-blue-50 border-blue-200"),children:(0,s.jsxs)(u,{className:"p-3 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-blue-400":"text-blue-600"),children:T}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:d.totalGames})]})}),(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"bg-green-50 border-green-200"),children:(0,s.jsxs)(u,{className:"p-3 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-green-400":"text-green-600"),children:I}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:d.wins})]})}),(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"bg-red-50 border-red-200"),children:(0,s.jsxs)(u,{className:"p-3 text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-red-400":"text-red-600"),children:G}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:d.losses})]})})]}),(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsxs)(u,{className:"p-4",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold mb-3 flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(P.Z,{className:"h-4 w-4 mr-1 text-yellow-500"}),d.bestRecords]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"p-2 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-yellow-50 border-yellow-200"),children:[(0,s.jsx)("div",{className:"text-xs font-bold ".concat("dark"===p.theme?"text-yellow-400":"text-yellow-800"),children:d.maxWinStreak}),(0,s.jsxs)("div",{className:"text-base font-bold ".concat("dark"===p.theme?"text-yellow-300":"text-yellow-900"),children:[K.maxStreak,"연승"]}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:eo})]}),i&&(0,s.jsxs)("div",{className:"p-2 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-blue-50 border-blue-200"),children:[(0,s.jsx)("div",{className:"text-xs font-bold ".concat("dark"===p.theme?"text-blue-400":"text-blue-800"),children:d.bestWinRateDeck}),(0,s.jsx)("div",{className:"text-sm font-bold ".concat("dark"===p.theme?"text-blue-300":"text-blue-900"),children:i.deck}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[i.winRate.toFixed(1),"% (",i.total,d.games,")"]})]}),ea&&(0,s.jsxs)("div",{className:"p-2 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-purple-50 border-purple-200"),children:[(0,s.jsx)("div",{className:"text-xs font-bold ".concat("dark"===p.theme?"text-purple-400":"text-purple-800"),children:d.mostPlayedDeck}),(0,s.jsx)("div",{className:"text-sm font-bold ".concat("dark"===p.theme?"text-purple-300":"text-purple-900"),children:ea.deck}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[ea.count,d.games]})]})]})]})})]})}),(0,s.jsxs)(A,{value:"detailed",className:"space-y-4",children:[(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(z.Z,{className:"h-4 w-4 mr-1 text-blue-500"}),d.mostPlayedDeck]})}),(0,s.jsx)(u,{className:"pt-0",children:(()=>{let e=new Map;n.forEach(t=>{let a=t.yourDeck;e.has(a)||e.set(a,{count:0,wins:0,losses:0});let s=e.get(a);s.count++,"win"===t.result?s.wins++:s.losses++});let t=Array.from(e.entries()).map(e=>{let[t,a]=e;return{deck:t,count:a.count,wins:a.wins,losses:a.losses,winRate:a.count>0?a.wins/a.count*100:0}}).sort((e,t)=>t.count-e.count).slice(0,3);return 0===t.length?(0,s.jsx)("div",{className:"text-center py-8 text-sm ".concat("dark"===p.theme?"text-gray-400":"text-gray-500"),children:d.noDecksUsed}):(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 h-40",children:[t[0]&&(0,s.jsx)("div",{className:"p-3 rounded-lg border flex flex-col justify-center bg-blue-50 border-blue-200",children:(0,s.jsxs)("div",{className:"text-gray-800",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-blue-600 mb-1",children:d.rank1}),(0,s.jsx)("div",{className:"text-lg font-bold mb-1 truncate text-blue-800",title:t[0].deck,children:t[0].deck}),(0,s.jsxs)("div",{className:"text-xs text-blue-700",children:[t[0].count,d.games," • ",t[0].winRate.toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs text-blue-600",children:[t[0].wins,d.wins," ",t[0].losses,d.losses]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[t[1]?(0,s.jsx)("div",{className:"p-2 rounded-lg border flex-1 ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-green-50 border-green-200"),children:(0,s.jsxs)("div",{className:"dark"===p.theme?"text-white":"text-gray-800",children:[(0,s.jsx)("div",{className:"text-xs font-medium mb-1 ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:d.rank2}),(0,s.jsx)("div",{className:"text-sm font-bold mb-1 truncate",title:t[1].deck,children:t[1].deck}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[t[1].count,d.games," • ",t[1].winRate.toFixed(1),"%"]})]})}):(0,s.jsx)("div",{className:"p-2 rounded-lg border flex-1 flex items-center justify-center ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-500":"text-gray-400"),children:"-"})}),t[2]?(0,s.jsx)("div",{className:"p-2 rounded-lg border flex-1 ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-yellow-50 border-yellow-200"),children:(0,s.jsxs)("div",{className:"dark"===p.theme?"text-white":"text-gray-800",children:[(0,s.jsx)("div",{className:"text-xs font-medium mb-1 ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:d.rank3}),(0,s.jsx)("div",{className:"text-sm font-bold mb-1 truncate",title:t[2].deck,children:t[2].deck}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[t[2].count,d.games," • ",t[2].winRate.toFixed(1),"%"]})]})}):(0,s.jsx)("div",{className:"p-2 rounded-lg border flex-1 flex items-center justify-center ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:(0,s.jsx)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-500":"text-gray-400"),children:"-"})})]})]})})()})]}),(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(H.Z,{className:"h-4 w-4 mr-1 text-blue-500"}),d.positionAnalysis]})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"p-3 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-blue-50 border-blue-200"),children:[(0,s.jsx)("div",{className:"text-sm font-bold ".concat("dark"===p.theme?"text-blue-400":"text-blue-800"),children:d.firstPosition}),(0,s.jsxs)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-blue-300":"text-blue-900"),children:[ee.first.winRate.toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[ee.first.wins,d.wins," ",ee.first.losses,d.losses]})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-red-50 border-red-200"),children:[(0,s.jsx)("div",{className:"text-sm font-bold ".concat("dark"===p.theme?"text-red-400":"text-red-800"),children:d.secondPosition}),(0,s.jsxs)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-red-300":"text-red-900"),children:[ee.second.winRate.toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[ee.second.wins,d.wins," ",ee.second.losses,d.losses]})]})]})})]}),(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(z.Z,{className:"h-4 w-4 mr-1 text-green-500"}),d.deckWinRate]})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:X.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 rounded-lg border shadow-sm ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"font-bold text-sm ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:e.deck}),(0,s.jsxs)("span",{className:"px-2 py-1 rounded-full text-white font-medium text-xs ".concat(e.winRate>=60?"bg-green-500":e.winRate>=40?"bg-blue-500":"bg-red-500"),children:[e.winRate.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[e.total,d.games," • ",e.wins,d.wins," ",e.losses,d.losses,e.avgWinStreak>0&&(0,s.jsxs)("span",{className:"ml-2 text-green-600",children:[d.avgWinStreak,": ",e.avgWinStreak.toFixed(1)]})]})]},t))})})]}),et.length>0&&(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(U.Z,{className:"h-4 w-4 mr-1 text-purple-500"}),d.timePlayed]})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsx)("div",{className:"space-y-2",children:et.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 rounded ".concat("dark"===p.theme?"bg-gray-700":"bg-gray-50"),children:[(0,s.jsx)("span",{className:"text-sm font-medium ".concat("dark"===p.theme?"text-white":""),children:"morning"===e.time?"\uD83C\uDF05 ".concat(d.morning):"afternoon"===e.time?"\uD83C\uDF24️ ".concat(d.afternoon):"evening"===e.time?"\uD83C\uDF06 ".concat(d.evening):"\uD83C\uDF19 ".concat(d.night)}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-sm font-bold ".concat("dark"===p.theme?"text-white":""),children:[e.total," ",d.games]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[e.wins,d.wins," ",e.losses,d.losses]})]})]},t))})})]}),(()=>{let e={};n.forEach(t=>{let a=new Date(t.timestamp),s=a.getFullYear(),r=Math.floor(a.getMonth()/3)+1,n="".concat(s,"-Q").concat(r);e[n]=(e[n]||0)+1});let t=Object.entries(e).filter(e=>{let[t,a]=e;return a>0}).sort((e,t)=>{let[a]=e,[s]=t;return a>s?-1:1});return 0===t.length?null:(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm font-semibold flex items-center ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)(z.Z,{className:"h-4 w-4 mr-1 text-indigo-500"}),d.quarterAnalysis]})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-40 overflow-y-auto",children:t.map(e=>{let[t,a]=e,[r,n]=t.split("-Q"),l=parseInt(r,10),o=parseInt(n,10),c="ko"===p.language?"".concat(String(l).slice(-2),"년 ").concat(o,"분기"):"Q".concat(o," ").concat(l);return(0,s.jsxs)("div",{className:"p-3 rounded-lg border ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,s.jsx)("div",{className:"text-xs font-bold ".concat("dark"===p.theme?"text-gray-300":"text-gray-700"),children:c}),(0,s.jsxs)("div",{className:"text-lg font-bold ".concat("dark"===p.theme?"text-white":"text-gray-900"),children:[a," ",d.games]})]},t)})})})]})})()]}),(0,s.jsxs)(A,{value:"matchup",className:"space-y-4",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)(_,{value:F,onValueChange:M,children:[(0,s.jsx)(W,{className:"w-full h-8 text-xs ".concat("dark"===p.theme?"bg-gray-800 border-gray-600 text-white":""),children:(0,s.jsx)(E,{placeholder:d.sortCriteria})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{value:"winRate",children:d.sortByWinRate}),(0,s.jsx)(V,{value:"yourDeck",children:d.sortByDeckName})]})]})}),(0,s.jsxs)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsx)(g,{className:"text-sm font-semibold ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:d.matchupAnalysis})}),(0,s.jsx)(u,{className:"pt-0",children:(0,s.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:0===$.length?(0,s.jsx)("div",{className:"text-center text-sm py-8 ".concat("dark"===p.theme?"text-gray-400":"text-gray-500"),children:d.matchupMinGames}):el.map((e,t)=>{var a;let r=(a=e.winRate)>=65?{text:d.advantage,color:"bg-green-500",icon:"\uD83D\uDCAA"}:a>=45?{text:d.equal,color:"bg-blue-500",icon:"⚖️"}:{text:d.disadvantage,color:"bg-red-500",icon:"\uD83D\uDE30"};return(0,s.jsxs)("div",{className:"p-4 rounded-lg border shadow-sm ".concat("dark"===p.theme?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(q.Z,{className:"h-3 w-3 text-blue-500"}),(0,s.jsx)("span",{className:"font-bold text-sm ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:e.yourDeck})]}),(0,s.jsx)("span",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-500"),children:"vs"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Y.Z,{className:"h-3 w-3 text-red-500"}),(0,s.jsx)("span",{className:"font-bold text-sm ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:e.opponentDeck})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-lg",children:r.icon}),(0,s.jsxs)("span",{className:"px-2 py-1 rounded-full text-white font-medium text-xs ".concat(r.color),children:[e.winRate.toFixed(0),"%"]})]}),(0,s.jsx)("div",{className:"text-xs font-bold ".concat(r.color.replace("bg-","text-")),children:r.text})]})]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:["총 ",e.total,d.games," • ",e.wins,d.wins," ",e.losses,d.losses]})]},t)})})})]})]}),(0,s.jsxs)(A,{value:"history",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(_,{value:f,onValueChange:w,children:[(0,s.jsx)(W,{className:"flex-1 h-8 text-xs ".concat("dark"===p.theme?"bg-gray-800 border-gray-600 text-white":""),children:(0,s.jsx)(E,{placeholder:d.yourDeckHeader})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{value:"all",children:d.allDecks}),er.map(e=>(0,s.jsx)(V,{value:e,children:e},e))]})]}),(0,s.jsxs)(_,{value:k,onValueChange:N,children:[(0,s.jsx)(W,{className:"flex-1 h-8 text-xs ".concat("dark"===p.theme?"bg-gray-800 border-gray-600 text-white":""),children:(0,s.jsx)(E,{placeholder:d.opponentHeader})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{value:"all",children:d.allOpponents}),en.map(e=>(0,s.jsx)(V,{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(_,{value:j,onValueChange:v,children:[(0,s.jsx)(W,{className:"flex-1 h-8 text-xs ".concat("dark"===p.theme?"bg-gray-800 border-gray-600 text-white":""),children:(0,s.jsx)(E,{placeholder:d.resultHeader})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{value:"all",children:d.allResults}),(0,s.jsx)(V,{value:"win",children:d.winsOnly}),(0,s.jsx)(V,{value:"lose",children:d.lossesOnly})]})]}),(0,s.jsxs)(_,{value:D,onValueChange:O,children:[(0,s.jsx)(W,{className:"flex-1 h-8 text-xs ".concat("dark"===p.theme?"bg-gray-800 border-gray-600 text-white":""),children:(0,s.jsx)(E,{placeholder:"정렬"})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{value:"date",children:d.sortByDate}),(0,s.jsx)(V,{value:"yourDeck",children:d.sortByYourDeck}),(0,s.jsx)(V,{value:"opponentDeck",children:d.sortByOpponentDeck}),(0,s.jsx)(V,{value:"result",children:d.sortByResult})]})]}),(0,s.jsx)(m,{variant:"outline",size:"sm",className:"px-2 ".concat("dark"===p.theme?"bg-gray-800 border-gray-700 text-white":"bg-transparent"),children:(0,s.jsx)(J.Z,{className:"h-3 w-3"})})]})]}),(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===p.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsxs)(u,{className:"p-3",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold mb-3 ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[d.allMatches," (",es.length,d.games,")"]}),(0,s.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:0===es.length?(0,s.jsx)("div",{className:"text-center text-sm py-8 ".concat("dark"===p.theme?"text-gray-400":"text-gray-500"),children:d.noMatchHistory}):es.map((e,t)=>{let a=new Date(e.timestamp),r=a.toLocaleDateString("ko-KR",{month:"short",day:"numeric"}),n=a.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return(0,s.jsx)("div",{className:"p-3 rounded-lg border shadow-sm transition-colors ".concat("dark"===p.theme?"".concat("win"===e.result?"bg-green-900/20 border-green-800":"bg-red-900/20 border-red-800"):"".concat("win"===e.result?"bg-green-50 border-green-200":"bg-red-50 border-red-200")),children:(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"font-bold text-sm ".concat("dark"===p.theme?"text-white":"text-gray-800"),children:[e.yourDeck," vs ",e.opponentDeck]}),(0,s.jsxs)("div",{className:"text-xs ".concat("dark"===p.theme?"text-gray-400":"text-gray-600"),children:[r," ",n," • ","first"===e.position?d.firstShort:d.secondShort]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-white font-medium text-xs ".concat("win"===e.result?"bg-green-500":"bg-red-500"),children:e.result.toUpperCase()}),e.winStreak>1&&(0,s.jsxs)("div",{className:"text-xs text-green-600 font-bold mt-1",children:[e.winStreak,"연승"]})]})]})},t)})})]})})]})]})]})})}var K=a(4258),X=a(3409),$=a(2513),ee=a(883),et=a(7390),ea=a(994);function es(e){let{yourDeck:t,setYourDeck:a,opponentDeck:n,setOpponentDeck:l,selectedOption:o,setSelectedOption:c,result:i,setResult:d,todayMatches:x,appSettings:g,onAddMatch:y,onDeleteMatch:b,onWriteCommunityPost:f,onFinishDay:w,onNavigateToSettings:k,onNavigateToStats:N,onGenerateReport:j,t:v}=e,[D,S]=(0,r.useState)(!1),R=x.filter(e=>"win"===e.result).length,C=x.length>0?R/x.length*100:0;return(0,s.jsx)("div",{className:"w-96 h-[600px] overflow-y-auto ".concat("dark"===g.theme?"bg-gray-900":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-xl font-bold ".concat("dark"===g.theme?"text-white":"text-gray-800"),children:v.appName})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:k,className:"p-2 ".concat("dark"===g.theme?"bg-gray-800 text-white border-gray-700":"bg-white"),children:(0,s.jsx)(K.Z,{className:"h-4 w-4"})}),(0,s.jsxs)(m,{variant:"outline",size:"sm",onClick:N,className:"bg-blue-500 text-white hover:bg-blue-600 border-blue-500",children:[(0,s.jsx)(X.Z,{className:"h-4 w-4 mr-1"}),v.stats]})]})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 mb-3",children:[(0,s.jsx)(p,{type:"text",placeholder:v.yourDeck,value:t,onChange:e=>a(e.target.value),className:"flex-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 shadow-sm ".concat("dark"===g.theme?"bg-gray-800 text-white border-gray-600":"")}),(0,s.jsx)(p,{type:"text",placeholder:v.opponentDeck,value:n,onChange:e=>l(e.target.value),className:"flex-1 h-11 border-gray-300 focus:border-blue-500 focus:ring-blue-500 shadow-sm ".concat("dark"===g.theme?"bg-gray-800 text-white border-gray-600":"")})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 mb-3",children:[(0,s.jsx)(m,{onClick:()=>c("first"),variant:"first"===o?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("first"===o?"bg-blue-500 hover:bg-blue-600 text-white shadow-md":"dark"===g.theme?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-blue-50 text-gray-700 border-gray-300"),children:v.first}),(0,s.jsx)(m,{onClick:()=>c("second"),variant:"second"===o?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("second"===o?"bg-red-500 hover:bg-red-600 text-white shadow-md":"dark"===g.theme?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-red-50 text-gray-700 border-gray-300"),children:v.second})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 mb-4",children:[(0,s.jsx)(m,{onClick:()=>d("win"),variant:"win"===i?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("win"===i?"bg-green-500 hover:bg-green-600 text-white shadow-md":"dark"===g.theme?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-green-50 text-gray-700 border-gray-300"),children:v.win}),(0,s.jsx)(m,{onClick:()=>d("lose"),variant:"lose"===i?"default":"outline",className:"flex-1 h-11 font-semibold transition-all ".concat("lose"===i?"bg-red-500 hover:bg-red-600 text-white shadow-md":"dark"===g.theme?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-red-50 text-gray-700 border-gray-300"),children:v.lose}),(0,s.jsxs)(m,{onClick:y,disabled:!t.trim()||!n.trim(),className:"flex-1 h-11 bg-blue-500 hover:bg-blue-600 text-white font-bold shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)($.Z,{className:"h-4 w-4 mr-1"}),v.add]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===g.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsxs)(u,{className:"p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1 ".concat("dark"===g.theme?"text-gray-300":"text-gray-600"),children:v.todayGames}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat("dark"===g.theme?"text-white":"text-gray-800"),children:x.length})]})}),(0,s.jsx)(h,{className:"shadow-sm ".concat("dark"===g.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsxs)(u,{className:"p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1 ".concat("dark"===g.theme?"text-gray-300":"text-gray-600"),children:v.winRate}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat("dark"===g.theme?"text-white":"text-gray-800"),children:[C.toFixed(1),"%"]})]})})]}),(0,s.jsx)(h,{className:"mb-4 shadow-sm ".concat("dark"===g.theme?"bg-gray-800 border-gray-700":"border-gray-200"),children:(0,s.jsx)(u,{className:"p-3",children:(0,s.jsx)("div",{className:"rounded border ".concat("dark"===g.theme?"bg-gray-900 border-gray-600":"bg-white border-gray-100"),style:{maxHeight:g.compactMode?"120px":"180px",overflowY:"auto"},children:0===x.length?(0,s.jsx)("div",{className:"p-6 text-center text-sm ".concat("dark"===g.theme?"text-gray-400":"text-gray-500"),children:v.noGames}):(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"sticky top-0 ".concat("dark"===g.theme?"bg-gray-800":"bg-gray-50"),children:(0,s.jsxs)("tr",{className:"border-b ".concat("dark"===g.theme?"border-gray-600":"border-gray-200"),children:[(0,s.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-semibold ".concat("dark"===g.theme?"text-gray-300":"text-gray-700"),children:v.yourDeckHeader}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-semibold ".concat("dark"===g.theme?"text-gray-300":"text-gray-700"),children:v.opponentHeader}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-semibold ".concat("dark"===g.theme?"text-gray-300":"text-gray-700"),children:v.positionHeader}),(0,s.jsx)("th",{className:"px-2 py-1.5 text-left text-xs font-semibold ".concat("dark"===g.theme?"text-gray-300":"text-gray-700"),children:v.resultHeader}),(0,s.jsx)("th",{className:"px-1 py-1.5 text-center text-xs font-semibold w-8 ".concat("dark"===g.theme?"text-gray-300":"text-gray-700")})]})}),(0,s.jsx)("tbody",{children:x.slice().reverse().map((e,t)=>{let a=x.length-1-t;return(0,s.jsxs)("tr",{className:"border-b text-xs transition-colors ".concat("dark"===g.theme?"border-gray-700 hover:bg-gray-700 ".concat("win"===e.result?"bg-green-900/20":"bg-red-900/20"):"border-gray-100 hover:bg-gray-50 ".concat("win"===e.result?"bg-green-50":"bg-red-50")),children:[(0,s.jsxs)("td",{className:"px-2 py-1.5 font-medium truncate max-w-[45px]",title:e.yourDeck,children:[e.yourDeck,g.showWinStreak&&e.winStreak>1&&(0,s.jsxs)("span",{className:"ml-1 text-green-600 font-bold",children:["+",e.winStreak]})]}),(0,s.jsx)("td",{className:"px-2 py-1.5 font-medium truncate max-w-[45px]",title:e.opponentDeck,children:e.opponentDeck}),(0,s.jsx)("td",{className:"px-2 py-1.5 font-semibold ".concat("first"===e.position?"text-blue-600":"text-red-600"),children:"ko"===g.language?"first"===e.position?v.firstShort:v.secondShort:"first"===e.position?v.firstAbbr:v.secondAbbr}),(0,s.jsx)("td",{className:"px-2 py-1.5 font-semibold ".concat("win"===e.result?"text-green-600":"text-red-600"),children:e.result.toUpperCase()}),(0,s.jsx)("td",{className:"px-1 py-1.5 text-center",children:(0,s.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>b(a),className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600 transition-colors",children:(0,s.jsx)(ee.Z,{className:"h-3 w-3"})})})]},a)})})]})})})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(m,{onClick:f,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 shadow-lg transition-all text-xs",children:[(0,s.jsx)(et.Z,{className:"h-3 w-3 mr-1"}),v.communityShare]}),(0,s.jsxs)(m,{onClick:w,className:"bg-green-500 hover:bg-green-600 text-white font-bold py-3 shadow-md transition-all text-xs",children:[(0,s.jsx)(ea.Z,{className:"h-3 w-3 mr-1"}),v.sendToStats]})]}),(0,s.jsxs)(m,{onClick:j,disabled:0===x.length,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 shadow-md transition-all text-sm disabled:opacity-50",children:[(0,s.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),v.downloadReport]})]})]})})}async function er(){try{console.log("CSV 파일 로드 시작...");let e=await fetch("/test_cardgame_500cases_utf8sig.csv");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.text();console.log("CSV 텍스트 길이:",t.length),console.log("CSV 첫 몇 줄:",t.split("\n").slice(0,3));let a=t.split("\n"),s=[];for(let e=1;e<a.length;e++){let t=a[e].trim();if(!t)continue;let r=t.split(",");if(r.length>=7)try{let e={yourDeck:r[2].trim(),opponentDeck:r[3].trim(),position:r[4].trim(),result:r[5].trim(),timestamp:new Date("".concat(r[0].trim(),"T").concat(r[1].trim(),":00")).toISOString(),winStreak:Number.parseInt(r[6].trim())||0,note:r[7]?r[7].trim().replace(/"/g,""):""};s.push(e)}catch(a){console.warn("라인 ".concat(e," 파싱 실패:"),t,a)}}return console.log("파싱된 매치 수:",s.length),console.log("첫 번째 매치:",s[0]),s}catch(e){return console.error("CSV 로드 오류:",e),[]}}var en=a(4697),el=a(5733),eo=a(6884),ec=a(4648);let ei={hideDeckNames:!1,deckAlias:"내 덱",hideOpponentNames:!1,showAllTimeStats:!0};function ed(e){let{todayMatches:t,allMatches:a,isOpen:n,onClose:l,t:o,settings:c}=e,[i,d]=(0,r.useState)("text"),[y,b]=(0,r.useState)(ei),[w,N]=(0,r.useState)(""),[j,v]=(0,r.useState)(!1),D=()=>{if(0===t.length)return 0;let e=0;for(let a=t.length-1;a>=0;a--)if("win"===t[a].result)e++;else break;return e},A=()=>{if(0===a.length)return null;let e=a.filter(e=>"win"===e.result).length,t=(e/a.length*100).toFixed(1),s=Math.max(...a.map(e=>e.winStreak),0);return{totalGames:a.length,wins:e,losses:a.length-e,winRate:Number.parseFloat(t),maxStreak:s}},O=()=>{if(0===t.length&&!y.showAllTimeStats)return"게임 기록이 없습니다.";let e=t.filter(e=>"win"===e.result).length,s=t.length>0?(e/t.length*100).toFixed(1):"0.0",r=D(),n=new Date().toLocaleDateString("ko-KR"),l=A(),c="";if(c+="\uD83D\uDCC5 ".concat(n,"\n")+"".concat("=".repeat(30),"\n\n"),y.showAllTimeStats&&l){c+="\uD83D\uDCCA 전체 통계 (누적)\n"+"• 총 게임: ".concat(l.totalGames,"게임\n")+"• 승리: ".concat(l.wins,"게임 | 패배: ").concat(l.losses,"게임\n")+"• 승률: ".concat(l.winRate,"%\n");let e=(()=>{let e=new Map;a.forEach(t=>e.set(t.yourDeck,(e.get(t.yourDeck)||0)+1));let t=Array.from(e.entries()).sort((e,t)=>t[1]-e[1]);return t.length?{deck:t[0][0],count:t[0][1]}:null})(),t=(()=>{let e=new Map;return a.forEach(t=>{let a=e.get(t.yourDeck)||{w:0,l:0};"win"===t.result?a.w+=1:a.l+=1,e.set(t.yourDeck,a)}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{deck:t,total:a.w+a.l,winRate:a.w+a.l>0?a.w/(a.w+a.l)*100:0}}).filter(e=>e.total>=3).sort((e,t)=>t.winRate-e.winRate)[0]||null})();e&&(c+="• 최다 플레이 덱: ".concat(e.deck," (").concat(e.count,"게임)\n")),t&&(c+="• 최고 승률 덱: ".concat(t.deck," (").concat(t.winRate.toFixed(1),"%)\n")),c+="\n"}return t.length>0?(c+="\uD83C\uDFAF 오늘의 전적\n"+"• 총 게임: ".concat(t.length,"게임\n")+"• 승리: ".concat(e,"게임 | 패배: ").concat(t.length-e,"게임\n")+"• 승률: ".concat(s,"%\n"),r>0&&(c+="• 현재 연승: ".concat(r,"연승 ⚡\n")),c+="\n\uD83C\uDFC6 게임 기록\n",t.forEach((e,t)=>{let a=y.hideDeckNames?y.deckAlias:e.yourDeck,s=y.hideOpponentNames?"상대":e.opponentDeck,r="first"===e.position?"선공\uD83D\uDE80":"후공\uD83D\uDEE1️",n="win"===e.result?"승리":"패배",l="win"===e.result?"✅":"❌",o=e.winStreak>1?" (".concat(e.winStreak,"연승!)"):"";c+="".concat(t+1,". ").concat(a," vs ").concat(s," (").concat(r,") → ").concat(n).concat(l).concat(o,"\n")})):y.showAllTimeStats||(c+="\uD83C\uDFAF 오늘의 전적\n아직 기록된 게임이 없습니다.\n"),c+="\n".concat("=".repeat(30),"\n")+"Generated by ".concat(o.appName)};(0,r.useEffect)(()=>{n&&N(O())},[y,i,n,t,a]);let F=async()=>{try{await navigator.clipboard.writeText(w),ec.Am.success("복사 완료 — 텍스트 리포트가 클립보드에 복사되었습니다.")}catch(e){console.error("텍스트 복사 실패:",e)}};return n?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"w-full max-w-3xl h-[70vh] rounded-lg shadow-xl ".concat("dark"===c.theme?"bg-gray-900":"bg-white"),children:(0,s.jsxs)("div",{className:"flex h-full",children:[(0,s.jsx)("div",{className:"w-60 border-r overflow-y-auto ".concat("dark"===c.theme?"border-gray-700 bg-gray-800":"border-gray-200"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold ".concat("dark"===c.theme?"text-white":"text-gray-800"),children:"리포트 생성기"}),(0,s.jsx)(m,{variant:"ghost",size:"sm",onClick:l,children:(0,s.jsx)(en.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)(S,{value:"text",className:"mb-4",children:(0,s.jsx)(R,{className:"grid w-full grid-cols-1",children:(0,s.jsx)(C,{value:"text",children:"텍스트"})})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm flex items-center",children:[(0,s.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"통계 설정"]})}),(0,s.jsxs)(u,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(f,{htmlFor:"show-all-stats",className:"text-sm",children:"전체 통계 표시"}),(0,s.jsx)(k,{id:"show-all-stats",checked:y.showAllTimeStats,onCheckedChange:e=>b({...y,showAllTimeStats:e})})]}),(0,s.jsx)("p",{className:"text-xs mt-2 ".concat("dark"===c.theme?"text-gray-400":"text-gray-600"),children:"CSV에 저장된 모든 전적 통계를 포함합니다"})]})]}),(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{className:"pb-3",children:(0,s.jsxs)(g,{className:"text-sm flex items-center",children:[(0,s.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"프라이버시 설정"]})}),(0,s.jsxs)(u,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(f,{htmlFor:"hide-deck",className:"text-sm",children:"덱 이름 숨기기"}),(0,s.jsx)(k,{id:"hide-deck",checked:y.hideDeckNames,onCheckedChange:e=>b({...y,hideDeckNames:e})})]}),y.hideDeckNames&&(0,s.jsxs)("div",{children:[(0,s.jsx)(f,{htmlFor:"deck-alias",className:"text-sm",children:"덱 별명"}),(0,s.jsx)(p,{id:"deck-alias",value:y.deckAlias,onChange:e=>b({...y,deckAlias:e.target.value}),className:"mt-1",placeholder:"예: 내 덱"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(f,{htmlFor:"hide-opponent",className:"text-sm",children:"상대 이름 숨기기"}),(0,s.jsx)(k,{id:"hide-opponent",checked:y.hideOpponentNames,onCheckedChange:e=>b({...y,hideOpponentNames:e})})]})]})]})]})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"p-4 border-b ".concat("dark"===c.theme?"border-gray-700":"border-gray-200"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-semibold ".concat("dark"===c.theme?"text-white":"text-gray-800"),children:"미리보기"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(m,{onClick:F,size:"sm",children:[(0,s.jsx)(eo.Z,{className:"h-4 w-4 mr-1"}),"복사"]}),(0,s.jsxs)(m,{onClick:()=>{let e=new Blob([w],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="Omegagu_Report_".concat(new Date().toISOString().split("T")[0],".txt"),a.click(),URL.revokeObjectURL(t)},variant:"outline",size:"sm",children:[(0,s.jsx)(B.Z,{className:"h-4 w-4 mr-1"}),"다운로드"]})]})]})}),(0,s.jsx)("div",{className:"flex-1 p-4 overflow-auto",children:(0,s.jsx)("div",{className:"w-full h-full p-3 rounded border font-mono text-sm whitespace-pre-wrap ".concat("dark"===c.theme?"bg-gray-800 border-gray-600 text-gray-100":"bg-gray-50 border-gray-200"),children:w})})]})]})})}):null}let em={language:"ko",theme:"light",compactMode:!1,showWinStreak:!1,autoSaveGames:0,streakNotification:!1,winRateGoal:0,communityUrl:"https://gall.dcinside.com/mgallery/board/write/?id=tcggame",communityDefaultTitle:"ㅇㅁㄱㄱ",communityDefaultCategory:"매칭",developerMode:!1},eh={ko:{appName:"Omegagu",stats:"통계",settings:"설정",back:"뒤로",save:"저장",todayGames:"오늘 게임",winRate:"승률",yourDeck:"내 덱",opponentDeck:"상대 덱",first:"선공",second:"후공",win:"승리",lose:"패배",add:"추가",noGames:"오늘의 전적이 없습니다",communityShare:"오메가구!!",sendToStats:"통계로 보내기",yourDeckHeader:"내 덱",opponentHeader:"상대",positionHeader:"순서",resultHeader:"결과",language:"언어",korean:"한국어",english:"English",theme:"테마",light:"라이트",dark:"다크",display:"표시 설정",showWinStreakLabel:"연승 표시",compactModeLabel:"컴팩트 모드",dataManagement:"데이터 관리",autoSave:"자동 저장",autoSaveDesc:"게임 수마다 자동으로 통계에 저장",disabled:"비활성화",notifications:"알림",streakNotificationLabel:"연승 알림",winRateGoalLabel:"목표 승률",clearAllData:"모든 데이터 삭제",exportData:"데이터 내보내기",importData:"데이터 불러오기",overview:"개요",detailed:"상세",matchup:"매치업",history:"기록",totalWinRate:"전체 승률",totalGames:"총 게임",wins:"승",losses:"패",bestRecords:"최고 기록",maxWinStreak:"최다 연승",current:"현재",bestWinRateDeck:"최고 승률 덱",downloadReport:"오늘의 전적 리포트 확인하기",quarterAnalysis:"분기별 플레이 분석",q1:"1분기",q2:"2분기",q3:"3분기",q4:"4분기",statsAnalysis:"통계 분석",csvExport:"CSV 내보내기",csvImport:"CSV 불러오기",mostPlayedDeck:"최다 플레이",sortCriteria:"정렬 기준",sortByWinRate:"승률순",sortByDeckName:"덱 이름 순",firstPosition:"선공 (FIRST)",secondPosition:"후공 (SECOND)",positionAnalysis:"선후공 분석",deckWinRate:"덱별 승률",timeAnalysis:"시간대별 분석",timePlayed:"시간대별 플레이 수",morning:"오전 (6-12시)",afternoon:"오후 (12-18시)",evening:"저녁 (18-24시)",night:"새벽 (0-6시)",matchupAnalysis:"매치업 분석",matchupMinGames:"매치업 분석을 위해서는 각 조합당 최소 3게임이 필요합니다",advantage:"우세",equal:"동등",disadvantage:"열세",allMatches:"전체 매치 기록",allDecks:"모든 덱",allOpponents:"모든 상대",allResults:"모든 결과",winsOnly:"승리만",lossesOnly:"패배만",sortByDate:"날짜순",sortByYourDeck:"내 덱순",sortByOpponentDeck:"상대 덱순",sortByResult:"결과순",noMatchHistory:"매치 기록이 없습니다",noDecksUsed:"사용된 덱이 없습니다",games:"게임",avgWinStreak:"평균 연승",noGamesRecorded:"기록된 게임이 없습니다!",streakAchieved:"연승 달성!",goalAchieved:"목표 승률",achieved:"달성!",todayStatsStored:"오늘의 전적이 통계에 저장되었습니다!",communityFeature:"커뮤니티 글 작성 기능 (개발 예정)",deleteConfirm:"이 기록을 삭제하시겠습니까?",clearAllConfirm:"정말로 모든 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.",allDataCleared:"모든 데이터가 삭제되었습니다.",newMatchesAdded:"개의 새로운 매치가 추가되었습니다!",noNewMatches:"새로운 매치가 없습니다.",loadingData:"데이터를 불러오는 중...",dataLoadError:"데이터 로드 중 오류가 발생했습니다.",imageGenerated:"이미지가 생성되었습니다!",imageCopied:"이미지가 클립보드에 복사되었습니다!",imageCopyFailed:"이미지 복사에 실패했습니다. 다운로드를 시도합니다.",firstShort:"선공",secondShort:"후공",firstAbbr:"1st",secondAbbr:"2nd",rank1:"1위",rank2:"2위",rank3:"3위"},en:{appName:"Omegagu",stats:"Stats",settings:"Settings",back:"Back",save:"Save",todayGames:"Today Games",winRate:"Win Rate",yourDeck:"Your Deck",opponentDeck:"Opponent Deck",first:"First",second:"Second",win:"WIN",lose:"LOSE",add:"ADD",noGames:"No today's games recorded",communityShare:"Community Share",sendToStats:"Send to Stats",yourDeckHeader:"Your Deck",opponentHeader:"Opponent",positionHeader:"Position",resultHeader:"Result",language:"Language",korean:"한국어",english:"English",theme:"Theme",light:"Light",dark:"Dark",display:"Display Settings",showWinStreakLabel:"Show Win Streak",compactModeLabel:"Compact Mode",dataManagement:"Data Management",autoSave:"Auto Save",autoSaveDesc:"Auto save to stats every N games",disabled:"Disabled",notifications:"Notifications",streakNotificationLabel:"Streak Notifications",winRateGoalLabel:"Win Rate Goal",clearAllData:"Clear All Data",exportData:"Export Data",importData:"Import Data",overview:"Overview",detailed:"Detailed",matchup:"Matchup",history:"History",totalWinRate:"Total Win Rate",totalGames:"Total Games",wins:"Wins",losses:"Losses",bestRecords:"Best Records",maxWinStreak:"Max Win Streak",current:"Current",bestWinRateDeck:"Best Win Rate Deck",downloadReport:"View Today's Report",quarterAnalysis:"Quarterly Play Analysis",q1:"Q1",q2:"Q2",q3:"Q3",q4:"Q4",statsAnalysis:"Statistics Analysis",csvExport:"CSV Export",csvImport:"CSV Import",mostPlayedDeck:"Most Played",sortCriteria:"Sort by",sortByWinRate:"Win Rate",sortByDeckName:"Deck Name",firstPosition:"First Position",secondPosition:"Second Position",positionAnalysis:"Position Analysis",deckWinRate:"Deck Win Rates",timeAnalysis:"Time Analysis",timePlayed:"Plays by Time of Day",morning:"Morning (6-12)",afternoon:"Afternoon (12-18)",evening:"Evening (18-24)",night:"Night (0-6)",matchupAnalysis:"Matchup Analysis",matchupMinGames:"Matchup analysis requires at least 3 games per combination",advantage:"Advantage",equal:"Equal",disadvantage:"Disadvantage",allMatches:"All Match Records",allDecks:"All Decks",allOpponents:"All Opponents",allResults:"All Results",winsOnly:"Wins Only",lossesOnly:"Losses Only",sortByDate:"Sort by Date",sortByYourDeck:"Sort by Your Deck",sortByOpponentDeck:"Sort by Opponent Deck",sortByResult:"Sort by Result",noMatchHistory:"No match records",noDecksUsed:"No decks used",games:"games",avgWinStreak:"Avg Win Streak",noGamesRecorded:"No games recorded!",streakAchieved:"Win Streak Achieved!",goalAchieved:"Win Rate Goal",achieved:"Achieved!",todayStatsStored:"Today's stats have been saved!",communityFeature:"Community feature (Coming Soon)",deleteConfirm:"Are you sure you want to delete this record?",clearAllConfirm:"Are you sure you want to delete all data? This action cannot be undone.",allDataCleared:"All data has been cleared.",newMatchesAdded:"new matches have been added!",noNewMatches:"No new matches found.",loadingData:"Loading data...",dataLoadError:"Error occurred while loading data.",imageGenerated:"Image generated successfully!",imageCopied:"Image copied to clipboard!",imageCopyFailed:"Failed to copy image. Downloading instead.",firstShort:"First",secondShort:"Second",firstAbbr:"1st",secondAbbr:"2nd",rank1:"1st",rank2:"2nd",rank3:"3rd"}};function ex(){let[e,t]=(0,r.useState)("main"),[a,n]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[c,i]=(0,r.useState)("first"),[d,m]=(0,r.useState)("win"),[h,x]=(0,r.useState)(em),[g,u]=(0,r.useState)([]),[p,y]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[w,k]=(0,r.useState)(!0),[N,j]=(0,r.useState)(!1),D=new Date().toISOString().split("T")[0],S=(0,r.useRef)(null),R=eh[h.language];(0,r.useEffect)(()=>{(async()=>{k(!0);let e=localStorage.getItem("omegagu_settings");e&&x({...em,...JSON.parse(e)});let t=localStorage.getItem("last_your_deck");t&&n(t);let a=localStorage.getItem("today_matches_".concat(D));if(a)u(JSON.parse(a));else{let e=new Date,t=t=>new Date(e.getTime()-36e5*t).toISOString(),a=[{yourDeck:"Omega A",opponentDeck:"Beta X",position:"first",result:"win",timestamp:t(1),winStreak:1},{yourDeck:"Omega A",opponentDeck:"Gamma Y",position:"second",result:"lose",timestamp:t(2),winStreak:0},{yourDeck:"Delta B",opponentDeck:"Beta X",position:"first",result:"win",timestamp:t(3),winStreak:1},{yourDeck:"Delta B",opponentDeck:"Gamma Y",position:"second",result:"win",timestamp:t(4),winStreak:2},{yourDeck:"Zeta C",opponentDeck:"Alpha Z",position:"first",result:"lose",timestamp:t(5),winStreak:0}];u(a),localStorage.setItem("today_matches_".concat(D),JSON.stringify(a))}let s=localStorage.getItem("all_time_stats");s&&y(JSON.parse(s));try{let e=await er();console.log("CSV에서 로드된 매치 수:",e.length);let t=localStorage.getItem("all_matches"),a=[];t&&(a=JSON.parse(t));let s=new Set(a.map(e=>e.timestamp)),r=e.filter(e=>!s.has(e.timestamp)),n=[...a,...r].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());f(n),localStorage.setItem("all_matches",JSON.stringify(n)),console.log("총 매치 수:",n.length)}catch(t){console.error("CSV 로드 실패:",t);let e=localStorage.getItem("all_matches");e&&f(JSON.parse(e))}k(!1)})()},[D]);let C=()=>{if(0===g.length){ec.Am.warn(R.noGamesRecorded);return}let e=g.filter(e=>"win"===e.result).length,t=g.filter(e=>"lose"===e.result).length,a=g.length,s=e/a*100,r=[...p,{date:D,matches:g,totalGames:a,wins:e,losses:t,draws:0,winRate:s}];y(r),localStorage.setItem("all_time_stats",JSON.stringify(r)),h.streakNotification&&s>=h.winRateGoal&&ec.Am.success("\uD83C\uDFAF ".concat(R.goalAchieved," ").concat(h.winRateGoal,"% ").concat(R.achieved," (").concat(s.toFixed(1),"%)")),u([]),localStorage.removeItem("today_matches_".concat(D)),ec.Am.success("통계로 전송 완료")},A=async()=>{let e=g.filter(e=>"win"===e.result).length,t=g.filter(e=>"lose"===e.result).length,a=g.length>0?(e/g.length*100).toFixed(1):"0.0",s=new Date().toISOString().split("T")[0],r=[];r.push("\uD83C\uDFAE ".concat(R.appName," 전적 리포트")),r.push("\uD83D\uDCC5 ".concat(s)),r.push("".padEnd(30,"=")),r.push(""),r.push("\uD83C\uDFAF 오늘의 전적"),r.push("• 총 게임: ".concat(g.length,"게임")),r.push("• 승리: ".concat(e,"게임 | 패배: ").concat(t,"게임")),r.push("• 승률: ".concat(a,"%")),r.push(""),g.length>0&&(r.push("\uD83C\uDFC6 게임 기록"),g.forEach((e,t)=>{let a="first"===e.position?R.firstShort:R.secondShort,s="win"===e.result?R.wins:R.losses;r.push("".concat(t+1,". ").concat(e.yourDeck," vs ").concat(e.opponentDeck," (").concat(a,") → ").concat(s))}),r.push("")),r.push("".padEnd(30,"=")),r.push("Generated by ".concat(R.appName));let n=r.join("\n");try{await navigator.clipboard.writeText(n)}catch(e){console.error("클립보드 복사 실패:",e)}h.communityUrl&&h.communityUrl.trim()?(window.open(h.communityUrl,"_blank"),setTimeout(()=>{ec.Am.info("복사 완료 — 말머리: ".concat(h.communityDefaultCategory||"매칭",", 제목: ").concat(h.communityDefaultTitle||"ㅇㅁㄱㄱ",". 본문은 클립보드에 복사되었습니다."))},300)):ec.Am.info("복사 완료 — 리포트 텍스트를 클립보드에 복사했습니다. 설정에서 커뮤니티 글쓰기 URL을 등록하면 글쓰기 페이지를 자동으로 열어드릴게요.")};return w?(0,s.jsx)("div",{className:"w-96 h-[600px] flex items-center justify-center ".concat("dark"===h.theme?"bg-gray-900":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"text-center ".concat("dark"===h.theme?"text-white":"text-gray-800"),children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{children:R.loadingData})]})}):"settings"===e?(0,s.jsx)(v,{settings:h,onSave:e=>{let t={...h,...e};x(t),localStorage.setItem("omegagu_settings",JSON.stringify(t)),ec.Am.success("저장 완료")},onBack:()=>t("main"),t:R}):"stats"===e?(0,s.jsx)(Q,{allTimeStats:p,todayMatches:g,allMatches:b,onBack:()=>t("main"),onExportCSV:()=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"matches",a=new Blob(["\uFEFF"+["Date,Time,YourDeck,OpponentDeck,Position,Result,WinStreak,Note",...e.map(e=>{let t=new Date(e.timestamp).toISOString().split("T")[0],a=new Date(e.timestamp).toLocaleTimeString("en-GB",{hour12:!1}).slice(0,5);return"".concat(t,",").concat(a,",").concat(e.yourDeck,",").concat(e.opponentDeck,",").concat(e.position,",").concat(e.result,",").concat(e.winStreak,',"').concat(e.note||"",'"')})].join("\n")],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="".concat(t,"_").concat(new Date().toISOString().split("T")[0],".csv"),r.click(),URL.revokeObjectURL(s)}(b,"Omegagu_AllMatches")},onImportCSV:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},bestDeck:function(e){let t=new Map;return e.forEach(e=>{let a=e.yourDeck;t.has(a)||t.set(a,{wins:0,losses:0,streaks:[]});let s=t.get(a);"win"===e.result?(s.wins++,e.winStreak>0&&s.streaks.push(e.winStreak)):s.losses++}),Array.from(t.entries()).map(e=>{let[t,a]=e;return{deck:t,wins:a.wins,losses:a.losses,total:a.wins+a.losses,winRate:a.wins+a.losses>0?a.wins/(a.wins+a.losses)*100:0,avgWinStreak:a.streaks.length>0?a.streaks.reduce((e,t)=>e+t,0)/a.streaks.length:0}}).sort((e,t)=>t.winRate-e.winRate).filter(e=>e.total>=10)[0]}(b),t:R,settings:h}):(g.filter(e=>"win"===e.result).length,g.length>0&&g.length,g.length>0&&g[g.length-1].winStreak,(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{ref:S,type:"file",accept:".csv",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&function(e,t,a,s){let r=new FileReader;r.onload=e=>{try{var r,n;let l=(null===(r=e.target)||void 0===r?void 0:r.result).split("\n"),o=[];for(let e=1;e<l.length;e++){let t=l[e].split(",");if(t.length>=7){let e={yourDeck:t[2],opponentDeck:t[3],position:t[4],result:t[5],timestamp:new Date("".concat(t[0],"T").concat(t[1],":00")).toISOString(),winStreak:Number.parseInt(t[6])||0,note:(null===(n=t[7])||void 0===n?void 0:n.replace(/"/g,""))||""};o.push(e)}}let c=new Set(t.map(e=>e.timestamp)),i=o.filter(e=>!c.has(e.timestamp));if(i.length>0){let e=[...t,...i].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());a(i,e)}else s("새로운 매치가 없습니다.")}catch(e){s("CSV 파일을 읽는 중 오류가 발생했습니다.")}},r.readAsText(e)}(a,b,(e,t)=>{f(t),localStorage.setItem("all_matches",JSON.stringify(t)),ec.Am.success("".concat(e.length).concat(R.newMatchesAdded))},e=>{ec.Am.error(String(e))})},style:{display:"none"}}),(0,s.jsx)(es,{yourDeck:a,setYourDeck:n,opponentDeck:l,setOpponentDeck:o,selectedOption:c,setSelectedOption:i,result:d,setResult:m,todayMatches:g,appSettings:h,onAddMatch:()=>{if(!a.trim()||!l.trim())return;localStorage.setItem("last_your_deck",a);let e=function(e,t){if("lose"===t)return 0;let a=1;for(let t=e.length-1;t>=0;t--)if("win"===e[t].result)a++;else break;return a}(g,d),t={yourDeck:a,opponentDeck:l,position:c,result:d,timestamp:new Date().toISOString(),winStreak:e},s=[...g,t];if(u(s),localStorage.setItem("today_matches_".concat(D),JSON.stringify(s)),f(function(e,t){let a=[...t,e].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());return localStorage.setItem("all_matches",JSON.stringify(a)),a}(t,b)),h.autoSaveGames>0&&s.length>=h.autoSaveGames){C();return}h.streakNotification&&e>=5&&"win"===d&&ec.Am.info("\uD83D\uDD25 ".concat(e).concat(R.streakAchieved)),n(""),o(""),m("win"),i("first")},onDeleteMatch:e=>{let t=g[e],a=g.filter((t,a)=>a!==e);u(a),localStorage.setItem("today_matches_".concat(D),JSON.stringify(a)),f(function(e,t){let a=t.filter(t=>t.timestamp!==e.timestamp);return localStorage.setItem("all_matches",JSON.stringify(a)),a}(t,b)),ec.Am.success("삭제됨 — ".concat(t.yourDeck," vs ").concat(t.opponentDeck))},onWriteCommunityPost:A,onFinishDay:C,onNavigateToSettings:()=>t("settings"),onNavigateToStats:()=>t("stats"),onGenerateReport:()=>{j(!0)},t:R}),(0,s.jsx)(ed,{todayMatches:g,allMatches:b,isOpen:N,onClose:()=>j(!1),t:R,settings:h})]}))}}},function(e){e.O(0,[648,490,971,23,744],function(){return e(e.s=7854)}),_N_E=e.O()}]);